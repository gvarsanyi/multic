// Generated by CoffeeScript 1.9.1
var compiler;

compiler = require('jade');

module.exports = function(inf, cb) {
  var compiled, desc, err, err_line, i, includes, len, line, line_n, ref;
  try {
    compiled = compiler.render(inf.source, {
      filename: inf.file,
      compileDebug: false,
      pretty: true,
      includes: (includes = [])
    });
    return cb(null, compiled, includes);
  } catch (_error) {
    err = _error;
    desc = String(err).split('\n\n').slice(1).join('\n\n');
    ref = String(err).split('\n');
    for (i = 0, len = ref.length; i < len; i++) {
      err_line = ref[i];
      if (err_line.substr(0, 4) === '  > ' && (line_n = String(err_line.substr(4).split('|')[0]).trim()) && !isNaN(line_n = Number(line_n))) {
        line = line_n - 1;
        break;
      }
    }
    return cb(require('../error-parser')(inf, err, line, desc));
  }
};
