// Generated by CoffeeScript 1.9.1
var compiler;

compiler = require('coffee-script');

module.exports = function(inf, cb) {
  var compiled, desc, err, pos, ref, ref1, ref2;
  try {
    compiled = compiler.compile(inf.source, {
      bare: true
    });
    return cb(null, compiled, null);
  } catch (_error) {
    err = _error;
    desc = String(err).split('\n')[0].split(':').slice(4).join(':').trim();
    if (((ref = err.location) != null ? ref.first_line : void 0) != null) {
      pos = [(ref1 = err.location) != null ? ref1.first_line : void 0, (ref2 = err.location) != null ? ref2.first_column : void 0];
    }
    return cb(require('../error-parser')(inf, err, pos, desc));
  }
};
